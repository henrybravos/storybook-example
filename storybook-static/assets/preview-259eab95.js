var Kr=Object.defineProperty;var Yr=(t,s,n)=>s in t?Kr(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var L=(t,s,n)=>(Yr(t,typeof s!="symbol"?s+"":s,n),n),be=(t,s,n)=>{if(!s.has(t))throw TypeError("Cannot "+n)};var N=(t,s,n)=>(be(t,s,"read from private field"),n?n.call(t):s.get(t)),ie=(t,s,n)=>{if(s.has(t))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(t):s.set(t,n)},we=(t,s,n,c)=>(be(t,s,"write to private field"),c?c.call(t,n):s.set(t,n),n);var V=(t,s,n)=>(be(t,s,"access private method"),n);import{a as ue,c as J}from"./_commonjsHelpers-de833af9.js";import{c as Qr}from"./_commonjs-dynamic-modules-302442b1.js";import{i as Y,d as K,E as ht,t as Zr,s as ft,l as Bt,I as es,a as _e,b as ts,c as rs,e as ss,f as ns,B as os,h as gt,j as is,k as as,m as us}from"./index-f15e7602.js";function ls(t,s){const n=t.emit;if(n._isPiped)return;const c=function(i,...g){return s.emit(i,...g),n.call(this,i,...g)};c._isPiped=!0,t.emit=c}function vt(t){const s=[...t];return Object.freeze(s),s}class cs{constructor(){L(this,"subscriptions",[])}async dispose(){await Promise.all(this.subscriptions.map(s=>s()))}}class ps extends cs{constructor(...n){super();L(this,"initialHandlers");L(this,"currentHandlers");L(this,"emitter");L(this,"publicEmitter");L(this,"events");Y(this.validateHandlers(n),K.formatMessage("Failed to apply given request handlers: invalid input. Did you forget to spread the request handlers Array?")),this.initialHandlers=vt(n),this.currentHandlers=[...n],this.emitter=new ht,this.publicEmitter=new ht,ls(this.emitter,this.publicEmitter),this.events=this.createLifeCycleEvents(),this.subscriptions.push(()=>{this.emitter.removeAllListeners(),this.publicEmitter.removeAllListeners()})}validateHandlers(n){return n.every(c=>!Array.isArray(c))}use(...n){Y(this.validateHandlers(n),K.formatMessage('Failed to call "use()" with the given request handlers: invalid input. Did you forget to spread the array of request handlers?')),this.currentHandlers.unshift(...n)}restoreHandlers(){this.currentHandlers.forEach(n=>{n.isUsed=!1})}resetHandlers(...n){this.currentHandlers=n.length>0?[...n]:[...this.initialHandlers]}listHandlers(){return vt(this.currentHandlers)}createLifeCycleEvents(){return{on:(...n)=>this.publicEmitter.on(...n),removeListener:(...n)=>this.publicEmitter.removeListener(...n),removeAllListeners:(...n)=>this.publicEmitter.removeAllListeners(...n)}}}var Ue=async t=>{try{return{error:null,data:await t().catch(n=>{throw n})}}catch(s){return{error:s,data:null}}};const ds=Object.freeze(Object.defineProperty({__proto__:null,until:Ue},Symbol.toStringTag,{value:"Module"})),hs=async({request:t,requestId:s,handlers:n,resolutionContext:c})=>{let d=null,i=null;for(const g of n)if(i=await g.run({request:t,requestId:s,resolutionContext:c}),i!==null&&(d=g),i!=null&&i.response)break;return d?{handler:d,parsedResult:i==null?void 0:i.parsedResult,response:i==null?void 0:i.response}:null};async function fs(t,s="warn"){const n=new URL(t.url),c=Zr(n),d=`intercepted a request without a matching request handler:

  • ${t.method} ${c}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/getting-started/mocks`;function i(g){switch(g){case"error":throw K.error("Error: %s",d),new Error(K.formatMessage('Cannot bypass a request when using the "error" strategy for the "onUnhandledRequest" option.'));case"warn":{K.warn("Warning: %s",d);break}case"bypass":break;default:throw new Error(K.formatMessage('Failed to react to an unhandled request: unknown strategy "%s". Please provide one of the supported strategies ("bypass", "warn", "error") or a custom callback function as the value of the "onUnhandledRequest" option.',g))}}if(typeof s=="function"){s(t,{warning:i.bind(null,"warn"),error:i.bind(null,"error")});return}n.protocol!=="file:"&&i(s)}function gs(t,s){ft.add({...t,url:t.url.toString()},s),ft.persist()}async function vs(t,s,n,c,d,i){var u,f,v,h,l,b;if(d.emit("request:start",{request:t,requestId:s}),t.headers.get("x-msw-intention")==="bypass"){d.emit("request:end",{request:t,requestId:s}),(u=i==null?void 0:i.onPassthroughResponse)==null||u.call(i,t);return}const g=await Ue(()=>hs({request:t,requestId:s,handlers:n,resolutionContext:i==null?void 0:i.resolutionContext}));if(g.error)throw d.emit("unhandledException",{error:g.error,request:t,requestId:s}),g.error;if(!g.data){await fs(t,c.onUnhandledRequest),d.emit("request:unhandled",{request:t,requestId:s}),d.emit("request:end",{request:t,requestId:s}),(f=i==null?void 0:i.onPassthroughResponse)==null||f.call(i,t);return}const{response:y}=g.data;if(!y){d.emit("request:end",{request:t,requestId:s}),(v=i==null?void 0:i.onPassthroughResponse)==null||v.call(i,t);return}if(y.status===302&&y.headers.get("x-msw-intention")==="passthrough"){d.emit("request:end",{request:t,requestId:s}),(h=i==null?void 0:i.onPassthroughResponse)==null||h.call(i,t);return}gs(t,y),d.emit("request:match",{request:t,requestId:s});const P=g.data,a=((l=i==null?void 0:i.transformResponse)==null?void 0:l.call(i,y))||y;return(b=i==null?void 0:i.onMockedResponse)==null||b.call(i,a,P),d.emit("request:end",{request:t,requestId:s}),a}var We={},I={};function ys(){const t=(s,n)=>{t.state="pending",t.resolve=c=>{if(t.state!=="pending")return;t.result=c;const d=i=>(t.state="fulfilled",i);return s(c instanceof Promise?c:Promise.resolve(c).then(d))},t.reject=c=>{if(t.state==="pending")return queueMicrotask(()=>{t.state="rejected"}),n(t.rejectionReason=c)}};return t}var G,re,he,Wt,ms=(Wt=class extends Promise{constructor(s=null){const n=ys();super((c,d)=>{n(c,d),s==null||s(n.resolve,n.reject)});ie(this,re);ie(this,G,void 0);L(this,"resolve");L(this,"reject");we(this,G,n),this.resolve=N(this,G).resolve,this.reject=N(this,G).reject}get state(){return N(this,G).state}get rejectionReason(){return N(this,G).rejectionReason}then(s,n){return V(this,re,he).call(this,super.then(s,n))}catch(s){return V(this,re,he).call(this,super.catch(s))}finally(s){return V(this,re,he).call(this,super.finally(s))}},G=new WeakMap,re=new WeakSet,he=function(s){return Object.defineProperties(s,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})},Wt);function bs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t=="x"?s:s&3|8).toString(16)})}var ws=class{constructor(t){this.request=t,this.responsePromise=new ms}respondWith(t){Y(this.responsePromise.state==="pending",'Failed to respond to "%s %s" request: the "request" event has already been responded to.',this.request.method,this.request.url),this.responsePromise.resolve(t)}};function _s(t){const s=new ws(t);return Reflect.set(t,"respondWith",s.respondWith.bind(s)),{interactiveRequest:t,requestController:s}}async function Ps(t,s,...n){const c=t.listeners(s);if(c.length!==0)for(const d of c)await d.apply(t,n)}function Rs(t,s){const n=new Uint8Array(t.byteLength+s.byteLength);return n.set(t,0),n.set(s,t.byteLength),n}var Nt=class{constructor(t,s){this.AT_TARGET=0,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=0,this.NONE=0,this.type="",this.srcElement=null,this.currentTarget=null,this.eventPhase=0,this.isTrusted=!0,this.composed=!1,this.cancelable=!0,this.defaultPrevented=!1,this.bubbles=!0,this.lengthComputable=!0,this.loaded=0,this.total=0,this.cancelBubble=!1,this.returnValue=!0,this.type=t,this.target=(s==null?void 0:s.target)||null,this.currentTarget=(s==null?void 0:s.currentTarget)||null,this.timeStamp=Date.now()}composedPath(){return[]}initEvent(t,s,n){this.type=t,this.bubbles=!!s,this.cancelable=!!n}preventDefault(){this.defaultPrevented=!0}stopPropagation(){}stopImmediatePropagation(){}},xs=class extends Nt{constructor(t,s){super(t),this.lengthComputable=(s==null?void 0:s.lengthComputable)||!1,this.composed=(s==null?void 0:s.composed)||!1,this.loaded=(s==null?void 0:s.loaded)||0,this.total=(s==null?void 0:s.total)||0}},Es=typeof ProgressEvent<"u";function qs(t,s,n){const c=["error","progress","loadstart","loadend","load","timeout","abort"],d=Es?ProgressEvent:xs;return c.includes(s)?new d(s,{lengthComputable:!0,loaded:(n==null?void 0:n.loaded)||0,total:(n==null?void 0:n.total)||0}):new Nt(s,{target:t,currentTarget:t})}function $t(t,s){if(!(s in t))return null;if(Object.prototype.hasOwnProperty.call(t,s))return t;const c=Reflect.getPrototypeOf(t);return c?$t(c,s):null}function yt(t,s){return new Proxy(t,ks(s))}function ks(t){const{constructorCall:s,methodCall:n,getProperty:c,setProperty:d}=t,i={};return typeof s<"u"&&(i.construct=function(g,y,P){const a=Reflect.construct.bind(null,g,y,P);return s.call(P,y,a)}),i.set=function(g,y,P){const a=()=>{const u=$t(g,y)||g,f=Reflect.getOwnPropertyDescriptor(u,y);return typeof(f==null?void 0:f.set)<"u"?(f.set.apply(g,[P]),!0):Reflect.defineProperty(u,y,{writable:!0,enumerable:!0,configurable:!0,value:P})};return typeof d<"u"?d.call(g,[y,P],a):a()},i.get=function(g,y,P){const a=()=>g[y],u=typeof c<"u"?c.call(g,[y,P],a):a();return typeof u=="function"?(...f)=>{const v=u.bind(g,...f);return typeof n<"u"?n.call(g,[y,f],v):v()}:u},i}function Ss(t){return["application/xhtml+xml","application/xml","image/svg+xml","text/html","text/xml"].some(n=>t.startsWith(n))}function Ls(t){try{return JSON.parse(t)}catch{return null}}function Ts(t,s){const n=ns(t.status)?null:s;return new Response(n,{status:t.status,statusText:t.statusText,headers:Os(t.getAllResponseHeaders())})}function Os(t){const s=new Headers,n=t.split(/[\r\n]+/);for(const c of n){if(c.trim()==="")continue;const[d,...i]=c.split(": "),g=i.join(": ");s.append(d,g)}return s}var mt=Symbol("isMockedResponse"),js=Bt.isNodeProcess(),Ms=class{constructor(t,s){this.initialRequest=t,this.logger=s,this.method="GET",this.url=null,this.events=new Map,this.requestId=bs(),this.requestHeaders=new Headers,this.responseBuffer=new Uint8Array,this.request=yt(t,{setProperty:([n,c],d)=>{switch(n){case"ontimeout":{const i=n.slice(2);return this.request.addEventListener(i,c),d()}default:return d()}},methodCall:([n,c],d)=>{var i;switch(n){case"open":{const[g,y]=c;return typeof y>"u"?(this.method="GET",this.url=bt(g)):(this.method=g,this.url=bt(y)),this.logger=this.logger.extend(`${this.method} ${this.url.href}`),this.logger.info("open",this.method,this.url.href),d()}case"addEventListener":{const[g,y]=c;return this.registerEvent(g,y),this.logger.info("addEventListener",g,y),d()}case"setRequestHeader":{const[g,y]=c;return this.requestHeaders.set(g,y),this.logger.info("setRequestHeader",g,y),d()}case"send":{const[g]=c;g!=null&&(this.requestBody=typeof g=="string"?ss(g):g),this.request.addEventListener("load",()=>{if(typeof this.onResponse<"u"){const a=Ts(this.request,this.request.response);this.onResponse.call(this,{response:a,isMockedResponse:mt in this.request,request:y,requestId:this.requestId})}});const y=this.toFetchApiRequest();(((i=this.onRequest)==null?void 0:i.call(this,{request:y,requestId:this.requestId}))||Promise.resolve()).finally(()=>{if(this.request.readyState<this.request.LOADING)return this.logger.info("request callback settled but request has not been handled (readystate %d), performing as-is...",this.request.readyState),js&&this.request.setRequestHeader("X-Request-Id",this.requestId),d()});break}default:return d()}}})}registerEvent(t,s){const c=(this.events.get(t)||[]).concat(s);this.events.set(t,c),this.logger.info('registered event "%s"',t,s)}respondWith(t){this.logger.info("responding with a mocked response: %d %s",t.status,t.statusText),te(this.request,mt,!0),te(this.request,"status",t.status),te(this.request,"statusText",t.statusText),te(this.request,"responseURL",this.url.href),this.request.getResponseHeader=new Proxy(this.request.getResponseHeader,{apply:(c,d,i)=>{if(this.logger.info("getResponseHeader",i[0]),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning null"),null;const g=t.headers.get(i[0]);return this.logger.info('resolved response header "%s" to',i[0],g),g}}),this.request.getAllResponseHeaders=new Proxy(this.request.getAllResponseHeaders,{apply:()=>{if(this.logger.info("getAllResponseHeaders"),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning empty string"),"";const d=Array.from(t.headers.entries()).map(([i,g])=>`${i}: ${g}`).join(`\r
`);return this.logger.info("resolved all response headers to",d),d}}),Object.defineProperties(this.request,{response:{enumerable:!0,configurable:!1,get:()=>this.response},responseText:{enumerable:!0,configurable:!1,get:()=>this.responseText},responseXML:{enumerable:!0,configurable:!1,get:()=>this.responseXML}});const s=t.headers.has("Content-Length")?Number(t.headers.get("Content-Length")):void 0;this.logger.info("calculated response body length",s),this.trigger("loadstart",{loaded:0,total:s}),this.setReadyState(this.request.HEADERS_RECEIVED),this.setReadyState(this.request.LOADING);const n=()=>{this.logger.info("finalizing the mocked response..."),this.setReadyState(this.request.DONE),this.trigger("load",{loaded:this.responseBuffer.byteLength,total:s}),this.trigger("loadend",{loaded:this.responseBuffer.byteLength,total:s})};if(t.body){this.logger.info("mocked response has body, streaming...");const c=t.body.getReader(),d=async()=>{const{value:i,done:g}=await c.read();if(g){this.logger.info("response body stream done!"),n();return}i&&(this.logger.info("read response body chunk:",i),this.responseBuffer=Rs(this.responseBuffer,i),this.trigger("progress",{loaded:this.responseBuffer.byteLength,total:s})),d()};d()}else n()}responseBufferToText(){return ts(this.responseBuffer)}get response(){if(this.logger.info("getResponse (responseType: %s)",this.request.responseType),this.request.readyState!==this.request.DONE)return null;switch(this.request.responseType){case"json":{const t=Ls(this.responseBufferToText());return this.logger.info("resolved response JSON",t),t}case"arraybuffer":{const t=rs(this.responseBuffer);return this.logger.info("resolved response ArrayBuffer",t),t}case"blob":{const t=this.request.getResponseHeader("Content-Type")||"text/plain",s=new Blob([this.responseBufferToText()],{type:t});return this.logger.info("resolved response Blob (mime type: %s)",s,t),s}default:{const t=this.responseBufferToText();return this.logger.info('resolving "%s" response type as text',this.request.responseType,t),t}}}get responseText(){if(Y(this.request.responseType===""||this.request.responseType==="text","InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.LOADING&&this.request.readyState!==this.request.DONE)return"";const t=this.responseBufferToText();return this.logger.info('getResponseText: "%s"',t),t}get responseXML(){if(Y(this.request.responseType===""||this.request.responseType==="document","InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.DONE)return null;const t=this.request.getResponseHeader("Content-Type")||"";return typeof DOMParser>"u"?(console.warn("Cannot retrieve XMLHttpRequest response body as XML: DOMParser is not defined. You are likely using an environment that is not browser or does not polyfill browser globals correctly."),null):Ss(t)?new DOMParser().parseFromString(this.responseBufferToText(),t):null}errorWith(t){this.logger.info("responding with an error"),this.setReadyState(this.request.DONE),this.trigger("error"),this.trigger("loadend")}setReadyState(t){if(this.logger.info("setReadyState: %d -> %d",this.request.readyState,t),this.request.readyState===t){this.logger.info("ready state identical, skipping transition...");return}te(this.request,"readyState",t),this.logger.info("set readyState to: %d",t),t!==this.request.UNSENT&&(this.logger.info('triggerring "readystatechange" event...'),this.trigger("readystatechange"))}trigger(t,s){const n=this.request[`on${t}`],c=qs(this.request,t,s);this.logger.info('trigger "%s"',t,s||""),typeof n=="function"&&(this.logger.info('found a direct "%s" callback, calling...',t),n.call(this.request,c));for(const[d,i]of this.events)d===t&&(this.logger.info('found %d listener(s) for "%s" event, calling...',i.length,t),i.forEach(g=>g.call(this.request,c)))}toFetchApiRequest(){this.logger.info("converting request to a Fetch API Request...");const t=new Request(this.url.href,{method:this.method,headers:this.requestHeaders,credentials:this.request.withCredentials?"include":"same-origin",body:["GET","HEAD"].includes(this.method)?null:this.requestBody}),s=yt(t.headers,{methodCall:([n,c],d)=>{switch(n){case"append":case"set":{const[i,g]=c;this.request.setRequestHeader(i,g);break}case"delete":{const[i]=c;console.warn(`XMLHttpRequest: Cannot remove a "${i}" header from the Fetch API representation of the "${t.method} ${t.url}" request. XMLHttpRequest headers cannot be removed.`);break}}return d()}});return te(t,"headers",s),this.logger.info("converted request to a Fetch API Request!",t),t}};function bt(t){return typeof location>"u"?new URL(t):new URL(t.toString(),location.href)}function te(t,s,n){Reflect.defineProperty(t,s,{writable:!0,enumerable:!0,value:n})}function As({emitter:t,logger:s}){return new Proxy(globalThis.XMLHttpRequest,{construct(c,d,i){s.info("constructed new XMLHttpRequest");const g=Reflect.construct(c,d,i),y=Object.getOwnPropertyDescriptors(c.prototype);for(const a in y)Reflect.defineProperty(g,a,y[a]);const P=new Ms(g,s);return P.onRequest=async function({request:a,requestId:u}){const{interactiveRequest:f,requestController:v}=_s(a);this.logger.info("awaiting mocked response..."),t.once("request",({requestId:b})=>{b===u&&v.responsePromise.state==="pending"&&v.respondWith(void 0)});const h=await Ue(async()=>{this.logger.info('emitting the "request" event for %s listener(s)...',t.listenerCount("request")),await Ps(t,"request",{request:f,requestId:u}),this.logger.info('all "request" listeners settled!');const b=await v.responsePromise;return this.logger.info("event.respondWith called with:",b),b});if(h.error){this.logger.info("request listener threw an exception, aborting request...",h.error),P.errorWith(h.error);return}const l=h.data;if(typeof l<"u"){if(this.logger.info("received mocked response: %d %s",l.status,l.statusText),l.type==="error"){this.logger.info("received a network error response, rejecting the request promise..."),P.errorWith(new TypeError("Network error"));return}return P.respondWith(l)}this.logger.info("no mocked response received, performing request as-is...")},P.onResponse=async function({response:a,isMockedResponse:u,request:f,requestId:v}){this.logger.info('emitting the "response" event for %s listener(s)...',t.listenerCount("response")),t.emit("response",{response:a,isMockedResponse:u,request:f,requestId:v})},P.request}})}var Ft=class extends es{constructor(){super(Ft.interceptorSymbol)}checkEnvironment(){return typeof globalThis.XMLHttpRequest<"u"}setup(){const t=this.logger.extend("setup");t.info('patching "XMLHttpRequest" module...');const s=globalThis.XMLHttpRequest;Y(!s[_e],'Failed to patch the "XMLHttpRequest" module: already patched.'),globalThis.XMLHttpRequest=As({emitter:this.emitter,logger:this.logger}),t.info('native "XMLHttpRequest" module patched!',globalThis.XMLHttpRequest.name),Object.defineProperty(globalThis.XMLHttpRequest,_e,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis.XMLHttpRequest,_e,{value:void 0}),globalThis.XMLHttpRequest=s,t.info('native "XMLHttpRequest" module restored!',globalThis.XMLHttpRequest.name)})}},Xt=Ft;Xt.interceptorSymbol=Symbol("xhr");function wt(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}function Gt(t,s){return Object.entries(s).reduce((n,[c,d])=>{const i=n[c];return Array.isArray(i)&&Array.isArray(d)?(n[c]=i.concat(d),n):wt(i)&&wt(d)?(n[c]=Gt(i,d),n):(n[c]=d,n)},Object.assign({},t))}var Cs={onUnhandledRequest:"warn"},Hs=class extends ps{constructor(s,...n){super(...n);L(this,"interceptor");L(this,"resolvedOptions");this.interceptor=new os({name:"setup-server",interceptors:s.map(c=>new c)}),this.resolvedOptions={},this.init()}init(){this.interceptor.on("request",async({request:s,requestId:n})=>{const c=await vs(s,n,this.currentHandlers,this.resolvedOptions,this.emitter);c&&s.respondWith(c)}),this.interceptor.on("response",({response:s,isMockedResponse:n,request:c,requestId:d})=>{this.emitter.emit(n?"response:mocked":"response:bypass",{response:s,request:c,requestId:d})})}listen(s={}){this.resolvedOptions=Gt(Cs,s),this.interceptor.apply(),this.subscriptions.push(()=>{this.interceptor.dispose()}),Y([gt.APPLYING,gt.APPLIED].includes(this.interceptor.readyState),K.formatMessage('Failed to start "setupServer": the interceptor failed to apply. This is likely an issue with the library and you should report it at "%s".'),"https://github.com/mswjs/msw/issues/new/choose")}close(){this.dispose()}};function Is(...t){return new Hs([Xt],...t)}const Ds=Object.freeze(Object.defineProperty({__proto__:null,setupServer:Is},Symbol.toStringTag,{value:"Module"})),Us=ue(Ds),Be=ue(is);var Pe,_t;function U(){if(_t)return Pe;_t=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(l,b)=>{for(var q in b)t(l,q,{get:b[q],enumerable:!0})},i=(l,b,q,R)=>{if(b&&typeof b=="object"||typeof b=="function")for(let E of n(b))!c.call(l,E)&&E!==q&&t(l,E,{get:()=>b[E],enumerable:!(R=s(b,E))||R.enumerable});return l},g=l=>i(t({},"__esModule",{value:!0}),l),y={};d(y,{devUtils:()=>h}),Pe=g(y);var P=Be;const a="[MSW]";function u(l,...b){const q=(0,P.format)(l,...b);return`${a} ${q}`}function f(l,...b){console.warn(u(l,...b))}function v(l,...b){console.error(u(l,...b))}const h={formatMessage:u,warn:f,error:v};return Pe}var Re,Pt;function Ws(){if(Pt)return Re;Pt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(f,v)=>{for(var h in v)t(f,h,{get:v[h],enumerable:!0})},i=(f,v,h,l)=>{if(v&&typeof v=="object"||typeof v=="function")for(let b of n(v))!c.call(f,b)&&b!==h&&t(f,b,{get:()=>v[b],enumerable:!(l=s(v,b))||l.enumerable});return f},g=f=>i(t({},"__esModule",{value:!0}),f),y={};d(y,{getCallFrame:()=>u}),Re=g(y);const P=/[\/\\]msw[\/\\]src[\/\\](.+)/,a=/(node_modules)?[\/\\]lib[\/\\](core|browser|node|native|iife)[\/\\]|^[^\/\\]*$/;function u(f){const v=f.stack;if(!v)return;const l=v.split(`
`).slice(1).find(q=>!(P.test(q)||a.test(q)));return l?l.replace(/\s*at [^()]*\(([^)]+)\)/,"$1").replace(/^@/,""):void 0}return Re}var xe,Rt;function Bs(){if(Rt)return xe;Rt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{isIterable:()=>P}),xe=g(y);function P(a){return a?typeof a[Symbol.iterator]=="function":!1}return xe}var Ee,xt;function Ns(){if(xt)return Ee;xt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(h,l)=>{for(var b in l)t(h,b,{get:l[b],enumerable:!0})},i=(h,l,b,q)=>{if(l&&typeof l=="object"||typeof l=="function")for(let R of n(l))!c.call(h,R)&&R!==b&&t(h,R,{get:()=>l[R],enumerable:!(q=s(l,R))||q.enumerable});return h},g=h=>i(t({},"__esModule",{value:!0}),h),y={};d(y,{RequestHandler:()=>f}),Ee=g(y);var P=Be,a=Ws(),u=Bs();const v=class v{constructor(l){L(this,"info");L(this,"isUsed");L(this,"resolver");L(this,"resolverGenerator");L(this,"resolverGeneratorResult");L(this,"options");this.resolver=l.resolver,this.options=l.options;const b=(0,a.getCallFrame)(new Error);this.info={...l.info,callFrame:b},this.isUsed=!1}async parse(l){return{}}async test(l){const b=await this.parse({request:l.request,resolutionContext:l.resolutionContext});return this.predicate({request:l.request,parsedResult:b,resolutionContext:l.resolutionContext})}extendResolverArgs(l){return{}}cloneRequestOrGetFromCache(l){const b=v.cache.get(l);if(typeof b<"u")return b;const q=l.clone();return v.cache.set(l,q),q}async run(l){var z,$;if(this.isUsed&&((z=this.options)!=null&&z.once))return null;const b=this.cloneRequestOrGetFromCache(l.request),q=await this.parse({request:l.request,resolutionContext:l.resolutionContext});if(!this.predicate({request:l.request,parsedResult:q,resolutionContext:l.resolutionContext})||this.isUsed&&(($=this.options)!=null&&$.once))return null;this.isUsed=!0;const E=this.wrapResolver(this.resolver),T=this.extendResolverArgs({request:l.request,parsedResult:q}),se=await E({...T,requestId:l.requestId,request:l.request}).catch(F=>{if(F instanceof Response)return F;throw F});return this.createExecutionResult({request:b,requestId:l.requestId,response:se,parsedResult:q})}wrapResolver(l){return async b=>{const q=this.resolverGenerator||await l(b);if((0,u.isIterable)(q)){this.isUsed=!1;const{value:R,done:E}=q[Symbol.iterator]().next(),T=await R;return E&&(this.isUsed=!0),!T&&E?((0,P.invariant)(this.resolverGeneratorResult,"Failed to returned a previously stored generator response: the value is not a valid Response."),this.resolverGeneratorResult.clone()):(this.resolverGenerator||(this.resolverGenerator=q),T&&(this.resolverGeneratorResult=T==null?void 0:T.clone()),T)}return q}}createExecutionResult(l){return{handler:this,request:l.request,requestId:l.requestId,response:l.response,parsedResult:l.parsedResult}}};L(v,"cache",new WeakMap);let f=v;return Ee}const $s=ue(ds);var qe,Et;function Fs(){if(Et)return qe;Et=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{executeHandlers:()=>P}),qe=g(y);const P=async({request:a,requestId:u,handlers:f,resolutionContext:v})=>{let h=null,l=null;for(const b of f)if(l=await b.run({request:a,requestId:u,resolutionContext:v}),l!==null&&(h=b),l!=null&&l.response)break;return h?{handler:h,parsedResult:l==null?void 0:l.parsedResult,response:l==null?void 0:l.response}:null};return qe}var ke,qt;function Xs(){if(qt)return ke;qt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{toPublicUrl:()=>P}),ke=g(y);function P(a){if(typeof location>"u")return a.toString();const u=a instanceof URL?a:new URL(a);return u.origin===location.origin?u.pathname:u.origin+u.pathname}return ke}var Se,kt;function Gs(){if(kt)return Se;kt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(f,v)=>{for(var h in v)t(f,h,{get:v[h],enumerable:!0})},i=(f,v,h,l)=>{if(v&&typeof v=="object"||typeof v=="function")for(let b of n(v))!c.call(f,b)&&b!==h&&t(f,b,{get:()=>v[b],enumerable:!(l=s(v,b))||l.enumerable});return f},g=f=>i(t({},"__esModule",{value:!0}),f),y={};d(y,{onUnhandledRequest:()=>u}),Se=g(y);var P=Xs(),a=U();async function u(f,v="warn"){const h=new URL(f.url),l=(0,P.toPublicUrl)(h),b=`intercepted a request without a matching request handler:

  • ${f.method} ${l}

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/getting-started/mocks`;function q(R){switch(R){case"error":throw a.devUtils.error("Error: %s",b),new Error(a.devUtils.formatMessage('Cannot bypass a request when using the "error" strategy for the "onUnhandledRequest" option.'));case"warn":{a.devUtils.warn("Warning: %s",b);break}case"bypass":break;default:throw new Error(a.devUtils.formatMessage('Failed to react to an unhandled request: unknown strategy "%s". Please provide one of the supported strategies ("bypass", "warn", "error") or a custom callback function as the value of the "onUnhandledRequest" option.',R))}}if(typeof v=="function"){v(f,{warning:q.bind(null,"warn"),error:q.bind(null,"error")});return}h.protocol!=="file:"&&q(v)}return Se}const Js=ue(as);var Le,St;function zs(){if(St)return Le;St=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(u,f)=>{for(var v in f)t(u,v,{get:f[v],enumerable:!0})},i=(u,f,v,h)=>{if(f&&typeof f=="object"||typeof f=="function")for(let l of n(f))!c.call(u,l)&&l!==v&&t(u,l,{get:()=>f[l],enumerable:!(h=s(f,l))||h.enumerable});return u},g=u=>i(t({},"__esModule",{value:!0}),u),y={};d(y,{readResponseCookies:()=>a}),Le=g(y);var P=Js;function a(u,f){P.store.add({...u,url:u.url.toString()},f),P.store.persist()}return Le}var Te,Lt;function Tt(){if(Lt)return Te;Lt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(h,l)=>{for(var b in l)t(h,b,{get:l[b],enumerable:!0})},i=(h,l,b,q)=>{if(l&&typeof l=="object"||typeof l=="function")for(let R of n(l))!c.call(h,R)&&R!==b&&t(h,R,{get:()=>l[R],enumerable:!(q=s(l,R))||q.enumerable});return h},g=h=>i(t({},"__esModule",{value:!0}),h),y={};d(y,{handleRequest:()=>v}),Te=g(y);var P=$s,a=Fs(),u=Gs(),f=zs();async function v(h,l,b,q,R,E){var z,$,F,le,ce,pe;if(R.emit("request:start",{request:h,requestId:l}),h.headers.get("x-msw-intention")==="bypass"){R.emit("request:end",{request:h,requestId:l}),(z=E==null?void 0:E.onPassthroughResponse)==null||z.call(E,h);return}const T=await(0,P.until)(()=>(0,a.executeHandlers)({request:h,requestId:l,handlers:b,resolutionContext:E==null?void 0:E.resolutionContext}));if(T.error)throw R.emit("unhandledException",{error:T.error,request:h,requestId:l}),T.error;if(!T.data){await(0,u.onUnhandledRequest)(h,q.onUnhandledRequest),R.emit("request:unhandled",{request:h,requestId:l}),R.emit("request:end",{request:h,requestId:l}),($=E==null?void 0:E.onPassthroughResponse)==null||$.call(E,h);return}const{response:D}=T.data;if(!D){R.emit("request:end",{request:h,requestId:l}),(F=E==null?void 0:E.onPassthroughResponse)==null||F.call(E,h);return}if(D.status===302&&D.headers.get("x-msw-intention")==="passthrough"){R.emit("request:end",{request:h,requestId:l}),(le=E==null?void 0:E.onPassthroughResponse)==null||le.call(E,h);return}(0,f.readResponseCookies)(h,D),R.emit("request:match",{request:h,requestId:l});const se=T.data,ne=((ce=E==null?void 0:E.transformResponse)==null?void 0:ce.call(E,D))||D;return(pe=E==null?void 0:E.onMockedResponse)==null||pe.call(E,ne,se),R.emit("request:end",{request:h,requestId:l}),ne}return Te}var Oe,Ot;function Vs(){if(Ot)return Oe;Ot=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{toResponseInit:()=>P}),Oe=g(y);function P(a){return{status:a.status,statusText:a.statusText,headers:Object.fromEntries(a.headers.entries())}}return Oe}var je,jt;function Ks(){if(jt)return je;jt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{isObject:()=>P}),je=g(y);function P(a){return a!=null&&typeof a=="object"&&!Array.isArray(a)}return je}var Me,Mt;function At(){if(Mt)return Me;Mt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(u,f)=>{for(var v in f)t(u,v,{get:f[v],enumerable:!0})},i=(u,f,v,h)=>{if(f&&typeof f=="object"||typeof f=="function")for(let l of n(f))!c.call(u,l)&&l!==v&&t(u,l,{get:()=>f[l],enumerable:!(h=s(f,l))||h.enumerable});return u},g=u=>i(t({},"__esModule",{value:!0}),u),y={};d(y,{mergeRight:()=>a}),Me=g(y);var P=Ks();function a(u,f){return Object.entries(f).reduce((v,[h,l])=>{const b=v[h];return Array.isArray(b)&&Array.isArray(l)?(v[h]=b.concat(l),v):(0,P.isObject)(b)&&(0,P.isObject)(l)?(v[h]=a(b,l),v):(v[h]=l,v)},Object.assign({},u))}return Me}const Ys=ue(us);var Ae,Ct;function Qs(){if(Ct)return Ae;Ct=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{pipeEvents:()=>P}),Ae=g(y);function P(a,u){const f=a.emit;if(f._isPiped)return;const v=function(l,...b){return u.emit(l,...b),f.call(this,l,...b)};v._isPiped=!0,a.emit=v}return Ae}var Ce,Ht;function Zs(){if(Ht)return Ce;Ht=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{toReadonlyArray:()=>P}),Ce=g(y);function P(a){const u=[...a];return Object.freeze(u),u}return Ce}var He,It;function en(){if(It)return He;It=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(a,u)=>{for(var f in u)t(a,f,{get:u[f],enumerable:!0})},i=(a,u,f,v)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!c.call(a,h)&&h!==f&&t(a,h,{get:()=>u[h],enumerable:!(v=s(u,h))||v.enumerable});return a},g=a=>i(t({},"__esModule",{value:!0}),a),y={};d(y,{Disposable:()=>P}),He=g(y);class P{constructor(){L(this,"subscriptions",[])}async dispose(){await Promise.all(this.subscriptions.map(u=>u()))}}return He}var Ie,Dt;function tn(){if(Dt)return Ie;Dt=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(b,q)=>{for(var R in q)t(b,R,{get:q[R],enumerable:!0})},i=(b,q,R,E)=>{if(q&&typeof q=="object"||typeof q=="function")for(let T of n(q))!c.call(b,T)&&T!==R&&t(b,T,{get:()=>q[T],enumerable:!(E=s(q,T))||E.enumerable});return b},g=b=>i(t({},"__esModule",{value:!0}),b),y={};d(y,{SetupApi:()=>l}),Ie=g(y);var P=Be,a=Ys,u=U(),f=Qs(),v=Zs(),h=en();class l extends h.Disposable{constructor(...R){super();L(this,"initialHandlers");L(this,"currentHandlers");L(this,"emitter");L(this,"publicEmitter");L(this,"events");(0,P.invariant)(this.validateHandlers(R),u.devUtils.formatMessage("Failed to apply given request handlers: invalid input. Did you forget to spread the request handlers Array?")),this.initialHandlers=(0,v.toReadonlyArray)(R),this.currentHandlers=[...R],this.emitter=new a.Emitter,this.publicEmitter=new a.Emitter,(0,f.pipeEvents)(this.emitter,this.publicEmitter),this.events=this.createLifeCycleEvents(),this.subscriptions.push(()=>{this.emitter.removeAllListeners(),this.publicEmitter.removeAllListeners()})}validateHandlers(R){return R.every(E=>!Array.isArray(E))}use(...R){(0,P.invariant)(this.validateHandlers(R),u.devUtils.formatMessage('Failed to call "use()" with the given request handlers: invalid input. Did you forget to spread the array of request handlers?')),this.currentHandlers.unshift(...R)}restoreHandlers(){this.currentHandlers.forEach(R=>{R.isUsed=!1})}resetHandlers(...R){this.currentHandlers=R.length>0?[...R]:[...this.initialHandlers]}listHandlers(){return(0,v.toReadonlyArray)(this.currentHandlers)}createLifeCycleEvents(){return{on:(...R)=>this.publicEmitter.on(...R),removeListener:(...R)=>this.publicEmitter.removeListener(...R),removeAllListeners:(...R)=>this.publicEmitter.removeAllListeners(...R)}}}return Ie}var De,Ut;function rn(){var X,ee,fe,dt;if(Ut)return De;Ut=1;var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,d=(e,r)=>{for(var o in r)t(e,o,{get:r[o],enumerable:!0})},i=(e,r,o,p)=>{if(r&&typeof r=="object"||typeof r=="function")for(let m of n(r))!c.call(e,m)&&m!==o&&t(e,m,{get:()=>r[m],enumerable:!(p=s(r,m))||p.enumerable});return e},g=e=>i(t({},"__esModule",{value:!0}),e),y={};d(y,{SetupWorkerApi:()=>pt,setupWorker:()=>Vr}),De=g(y);var P=/(%?)(%([sdijo]))/g;function a(e,r){switch(r){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":{if(typeof e=="string")return e;const o=JSON.stringify(e);return o==="{}"||o==="[]"||/^\[object .+?\]$/.test(o)?e:o}}}function u(e,...r){if(r.length===0)return e;let o=0,p=e.replace(P,(m,_,w,x)=>{const k=r[o],S=a(k,x);return _?m:(o++,S)});return o<r.length&&(p+=` ${r.slice(o).join(" ")}`),p=p.replace(/%{2,2}/g,"%"),p}var f=2;function v(e){if(!e.stack)return;const r=e.stack.split(`
`);r.splice(1,f),e.stack=r.join(`
`)}var h=class extends Error{constructor(e,...r){super(e),this.message=e,this.name="Invariant Violation",this.message=u(e,...r),v(this)}},l=(e,r,...o)=>{if(!e)throw new h(r,...o)};l.as=(e,r,o,...p)=>{if(!r){const m=p.length===0?o:u(o,p);let _;try{_=Reflect.construct(e,[m])}catch{_=e(m)}throw _}};function b(){if(typeof navigator<"u"&&navigator.product==="ReactNative")return!0;if(typeof process<"u"){const e=process.type;return e==="renderer"||e==="worker"?!1:!!(process.versions&&process.versions.node)}return!1}var q=async e=>{try{return{error:null,data:await e().catch(o=>{throw o})}}catch(r){return{error:r,data:null}}},R=U(),E=U();function T(e){return new URL(e,location.href).href}function D(e,r,o){return[e.active,e.installing,e.waiting].filter(w=>w!=null).find(w=>o(w.scriptURL,r))||null}var se=async(e,r={},o)=>{const p=T(e),m=await navigator.serviceWorker.getRegistrations().then(x=>x.filter(k=>D(k,p,o)));!navigator.serviceWorker.controller&&m.length>0&&location.reload();const[_]=m;if(_)return _.update().then(()=>[D(_,p,o),_]);const w=await q(async()=>{const x=await navigator.serviceWorker.register(e,r);return[D(x,p,o),x]});if(w.error){if(w.error.message.includes("(404)")){const k=new URL((r==null?void 0:r.scope)||"/",location.href);throw new Error(E.devUtils.formatMessage(`Failed to register a Service Worker for scope ('${k.href}') with script ('${p}'): Service Worker script does not exist at the given path.

Did you forget to run "npx msw init <PUBLIC_DIR>"?

Learn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`))}throw new Error(E.devUtils.formatMessage(`Failed to register the Service Worker:

%s`,w.error.message))}return w.data},ne=U(),z=U();function $(e={}){if(e.quiet)return;const r=e.message||"Mocking enabled.";console.groupCollapsed(`%c${z.devUtils.formatMessage(r)}`,"color:orangered;font-weight:bold;"),console.log("%cDocumentation: %chttps://mswjs.io/docs","font-weight:bold","font-weight:normal"),console.log("Found an issue? https://github.com/mswjs/msw/issues"),e.workerUrl&&console.log("Worker script URL:",e.workerUrl),e.workerScope&&console.log("Worker scope:",e.workerScope),console.groupEnd()}async function F(e,r){var o,p;if(e.workerChannel.send("MOCK_ACTIVATE"),await e.events.once("MOCKING_ENABLED"),e.isMockingEnabled){ne.devUtils.warn('Found a redundant "worker.start()" call. Note that starting the worker while mocking is already enabled will have no effect. Consider removing this "worker.start()" call.');return}e.isMockingEnabled=!0,$({quiet:r.quiet,workerScope:(o=e.registration)==null?void 0:o.scope,workerUrl:(p=e.worker)==null?void 0:p.scriptURL})}var le=class{constructor(e){this.port=e}postMessage(e,...r){const[o,p]=r;this.port.postMessage({type:e,data:o},{transfer:p})}};function ce(e){if(!["HEAD","GET"].includes(e.method))return e.body}function pe(e){return new Request(e.url,{...e,body:ce(e)})}var zt=Ns(),Vt=Tt(),Kt=U(),Yt=Vs(),Qt=(e,r)=>async(o,p)=>{const m=new le(o.ports[0]),_=p.payload.id,w=pe(p.payload),x=w.clone(),k=w.clone();zt.RequestHandler.cache.set(w,k),e.requests.set(_,k);try{await(0,Vt.handleRequest)(w,_,e.requestHandlers,r,e.emitter,{onPassthroughResponse(){m.postMessage("NOT_FOUND")},async onMockedResponse(S,{handler:O,parsedResult:C}){const j=S.clone(),H=S.clone(),A=(0,Yt.toResponseInit)(S);if(e.supports.readableStreamTransfer){const B=S.body;m.postMessage("MOCK_RESPONSE",{...A,body:B},B?[B]:void 0)}else{const B=S.body===null?null:await j.arrayBuffer();m.postMessage("MOCK_RESPONSE",{...A,body:B})}r.quiet||e.emitter.once("response:mocked",()=>{O.log({request:x,response:H,parsedResult:C})})}})}catch(S){S instanceof Error&&(Kt.devUtils.error(`Uncaught exception in the request handler for "%s %s":

%s

This exception has been gracefully handled as a 500 response, however, it's strongly recommended to resolve this error, as it indicates a mistake in your code. If you wish to mock an error response, please see this guide: https://mswjs.io/docs/recipes/mocking-error-responses`,w.method,w.url,S.stack??S),m.postMessage("MOCK_RESPONSE",{status:500,statusText:"Request Handler Error",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S.name,message:S.message,stack:S.stack})}))}};async function Zt(e,r){e.workerChannel.send("INTEGRITY_CHECK_REQUEST");const{payload:o}=await e.events.once("INTEGRITY_CHECK_RESPONSE");if(o!=="223d191a56023cd36aa88c802961b911")throw new Error(`Currently active Service Worker (${o}) is behind the latest published one (223d191a56023cd36aa88c802961b911).`);return r}var er=new TextEncoder;function tr(e){return er.encode(e)}function rr(e,r){return new TextDecoder(r).decode(e)}function sr(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}var nr=new Set([101,103,204,205,304]);function Ne(e){return nr.has(e)}var or=Object.defineProperty,ir=(e,r)=>{for(var o in r)or(e,o,{get:r[o],enumerable:!0})},ge={};ir(ge,{blue:()=>ur,gray:()=>ve,green:()=>cr,red:()=>lr,yellow:()=>ar});function ar(e){return`\x1B[33m${e}\x1B[0m`}function ur(e){return`\x1B[34m${e}\x1B[0m`}function ve(e){return`\x1B[90m${e}\x1B[0m`}function lr(e){return`\x1B[31m${e}\x1B[0m`}function cr(e){return`\x1B[32m${e}\x1B[0m`}var de=b(),$e=class{constructor(e){L(this,"prefix");this.name=e,this.prefix=`[${this.name}]`;const r=Fe("DEBUG"),o=Fe("LOG_LEVEL");r==="1"||r==="true"||typeof r<"u"&&this.name.startsWith(r)?(this.debug=oe(o,"debug")?W:this.debug,this.info=oe(o,"info")?W:this.info,this.success=oe(o,"success")?W:this.success,this.warning=oe(o,"warning")?W:this.warning,this.error=oe(o,"error")?W:this.error):(this.info=W,this.success=W,this.warning=W,this.error=W,this.only=W)}extend(e){return new $e(`${this.name}:${e}`)}debug(e,...r){this.logEntry({level:"debug",message:ve(e),positionals:r,prefix:this.prefix,colors:{prefix:"gray"}})}info(e,...r){this.logEntry({level:"info",message:e,positionals:r,prefix:this.prefix,colors:{prefix:"blue"}});const o=new pr;return(p,...m)=>{o.measure(),this.logEntry({level:"info",message:`${p} ${ve(`${o.deltaTime}ms`)}`,positionals:m,prefix:this.prefix,colors:{prefix:"blue"}})}}success(e,...r){this.logEntry({level:"info",message:e,positionals:r,prefix:`✔ ${this.prefix}`,colors:{timestamp:"green",prefix:"green"}})}warning(e,...r){this.logEntry({level:"warning",message:e,positionals:r,prefix:`⚠ ${this.prefix}`,colors:{timestamp:"yellow",prefix:"yellow"}})}error(e,...r){this.logEntry({level:"error",message:e,positionals:r,prefix:`✖ ${this.prefix}`,colors:{timestamp:"red",prefix:"red"}})}only(e){e()}createEntry(e,r){return{timestamp:new Date,level:e,message:r}}logEntry(e){const{level:r,message:o,prefix:p,colors:m,positionals:_=[]}=e,w=this.createEntry(r,o),x=(m==null?void 0:m.timestamp)||"gray",k=(m==null?void 0:m.prefix)||"gray",S={timestamp:ge[x],prefix:ge[k]};this.getWriter(r)([S.timestamp(this.formatTimestamp(w.timestamp))].concat(p!=null?S.prefix(p):[]).concat(Xe(o)).join(" "),..._.map(Xe))}formatTimestamp(e){return`${e.toLocaleTimeString("en-GB")}:${e.getMilliseconds()}`}getWriter(e){switch(e){case"debug":case"success":case"info":return dr;case"warning":return hr;case"error":return fr}}},pr=class{constructor(){L(this,"startTime");L(this,"endTime");L(this,"deltaTime");this.startTime=performance.now()}measure(){this.endTime=performance.now();const e=this.endTime-this.startTime;this.deltaTime=e.toFixed(2)}},W=()=>{};function dr(e,...r){if(de){process.stdout.write(u(e,...r)+`
`);return}console.log(e,...r)}function hr(e,...r){if(de){process.stderr.write(u(e,...r)+`
`);return}console.warn(e,...r)}function fr(e,...r){if(de){process.stderr.write(u(e,...r)+`
`);return}console.error(e,...r)}function Fe(e){var r;return de?process.env[e]:(r=globalThis[e])==null?void 0:r.toString()}function oe(e,r){return e!==void 0&&e!==r}function Xe(e){return typeof e>"u"?"undefined":e===null?"null":typeof e=="string"?e:typeof e=="object"?JSON.stringify(e):e.toString()}var gr=class extends Error{constructor(e,r,o){super(`Possible EventEmitter memory leak detected. ${o} ${r.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),this.emitter=e,this.type=r,this.count=o,this.name="MaxListenersExceededWarning"}},Ge=class{static listenerCount(e,r){return e.listenerCount(r)}constructor(){this.events=new Map,this.maxListeners=Ge.defaultMaxListeners,this.hasWarnedAboutPotentialMemoryLeak=!1}_emitInternalEvent(e,r,o){this.emit(e,r,o)}_getListeners(e){return Array.prototype.concat.apply([],this.events.get(e))||[]}_removeListener(e,r){const o=e.indexOf(r);return o>-1&&e.splice(o,1),[]}_wrapOnceListener(e,r){const o=(...p)=>(this.removeListener(e,o),r.apply(this,p));return Object.defineProperty(o,"name",{value:r.name}),o}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}eventNames(){return Array.from(this.events.keys())}emit(e,...r){const o=this._getListeners(e);return o.forEach(p=>{p.apply(this,r)}),o.length>0}addListener(e,r){this._emitInternalEvent("newListener",e,r);const o=this._getListeners(e).concat(r);if(this.events.set(e,o),this.maxListeners>0&&this.listenerCount(e)>this.maxListeners&&!this.hasWarnedAboutPotentialMemoryLeak){this.hasWarnedAboutPotentialMemoryLeak=!0;const p=new gr(this,e,this.listenerCount(e));console.warn(p)}return this}on(e,r){return this.addListener(e,r)}once(e,r){return this.addListener(e,this._wrapOnceListener(e,r))}prependListener(e,r){const o=this._getListeners(e);if(o.length>0){const p=[r].concat(o);this.events.set(e,p)}else this.events.set(e,o.concat(r));return this}prependOnceListener(e,r){return this.prependListener(e,this._wrapOnceListener(e,r))}removeListener(e,r){const o=this._getListeners(e);return o.length>0&&(this._removeListener(o,r),this.events.set(e,o),this._emitInternalEvent("removeListener",e,r)),this}off(e,r){return this.removeListener(e,r)}removeAllListeners(e){return e?this.events.delete(e):this.events.clear(),this}listeners(e){return Array.from(this._getListeners(e))}listenerCount(e){return this._getListeners(e).length}rawListeners(e){return this.listeners(e)}},Je=Ge;Je.defaultMaxListeners=10;var Q=Symbol("isPatchedModule");function ze(e){return globalThis[e]||void 0}function vr(e,r){globalThis[e]=r}function yr(e){delete globalThis[e]}var ye=class{constructor(e){this.symbol=e,this.readyState="INACTIVE",this.emitter=new Je,this.subscriptions=[],this.logger=new $e(e.description),this.emitter.setMaxListeners(0),this.logger.info("constructing the interceptor...")}checkEnvironment(){return!0}apply(){const e=this.logger.extend("apply");if(e.info("applying the interceptor..."),this.readyState==="APPLIED"){e.info("intercepted already applied!");return}if(!this.checkEnvironment()){e.info("the interceptor cannot be applied in this environment!");return}this.readyState="APPLYING";const o=this.getInstance();if(o){e.info("found a running instance, reusing..."),this.on=(p,m)=>(e.info('proxying the "%s" listener',p),o.emitter.addListener(p,m),this.subscriptions.push(()=>{o.emitter.removeListener(p,m),e.info('removed proxied "%s" listener!',p)}),this),this.readyState="APPLIED";return}e.info("no running instance found, setting up a new instance..."),this.setup(),this.setInstance(),this.readyState="APPLIED"}setup(){}on(e,r){const o=this.logger.extend("on");return this.readyState==="DISPOSING"||this.readyState==="DISPOSED"?(o.info("cannot listen to events, already disposed!"),this):(o.info('adding "%s" event listener:',e,r),this.emitter.on(e,r),this)}once(e,r){return this.emitter.once(e,r),this}off(e,r){return this.emitter.off(e,r),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}dispose(){const e=this.logger.extend("dispose");if(this.readyState==="DISPOSED"){e.info("cannot dispose, already disposed!");return}if(e.info("disposing the interceptor..."),this.readyState="DISPOSING",!this.getInstance()){e.info("no interceptors running, skipping dispose...");return}if(this.clearInstance(),e.info("global symbol deleted:",ze(this.symbol)),this.subscriptions.length>0){e.info("disposing of %d subscriptions...",this.subscriptions.length);for(const r of this.subscriptions)r();this.subscriptions=[],e.info("disposed of all subscriptions!",this.subscriptions.length)}this.emitter.removeAllListeners(),e.info("destroyed the listener!"),this.readyState="DISPOSED"}getInstance(){var e;const r=ze(this.symbol);return this.logger.info("retrieved global instance:",(e=r==null?void 0:r.constructor)==null?void 0:e.name),r}setInstance(){vr(this.symbol,this),this.logger.info("set global instance!",this.symbol.description)}clearInstance(){yr(this.symbol),this.logger.info("cleared global instance!",this.symbol.description)}},me=class extends ye{constructor(e){me.symbol=Symbol(e.name),super(me.symbol),this.interceptors=e.interceptors}setup(){const e=this.logger.extend("setup");e.info("applying all %d interceptors...",this.interceptors.length);for(const r of this.interceptors)e.info('applying "%s" interceptor...',r.constructor.name),r.apply(),e.info("adding interceptor dispose subscription"),this.subscriptions.push(()=>r.dispose())}on(e,r){for(const o of this.interceptors)o.on(e,r);return this}once(e,r){for(const o of this.interceptors)o.once(e,r);return this}off(e,r){for(const o of this.interceptors)o.off(e,r);return this}removeAllListeners(e){for(const r of this.interceptors)r.removeAllListeners(e);return this}};function mr(e){return(r,o)=>{var x;const{payload:p}=o,{requestId:m}=p,_=e.requests.get(m);if(e.requests.delete(m),(x=p.type)!=null&&x.includes("opaque"))return;const w=p.status===0?Response.error():new Response(Ne(p.status)?null:p.body,p);e.emitter.emit(p.isMockedResponse?"response:mocked":"response:bypass",{response:w,request:_,requestId:p.requestId})}}var br=U();function wr(e,r){!(r!=null&&r.quiet)&&!location.href.startsWith(e.scope)&&br.devUtils.warn(`Cannot intercept requests on this page because it's outside of the worker's scope ("${e.scope}"). If you wish to mock API requests on this page, you must resolve this scope issue.

- (Recommended) Register the worker at the root level ("/") of your application.
- Set the "Service-Worker-Allowed" response header to allow out-of-scope workers.`)}var _r=e=>function(o,p){return(async()=>{e.events.removeAllListeners(),e.workerChannel.on("REQUEST",Qt(e,o)),e.workerChannel.on("RESPONSE",mr(e));const w=await se(o.serviceWorker.url,o.serviceWorker.options,o.findWorker),[x,k]=w;if(!x){const O=p!=null&&p.findWorker?R.devUtils.formatMessage(`Failed to locate the Service Worker registration using a custom "findWorker" predicate.

Please ensure that the custom predicate properly locates the Service Worker registration at "%s".
More details: https://mswjs.io/docs/api/setup-worker/start#findworker
`,o.serviceWorker.url):R.devUtils.formatMessage(`Failed to locate the Service Worker registration.

This most likely means that the worker script URL "%s" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.

Please consider using a custom "serviceWorker.url" option to point to the actual worker script location, or a custom "findWorker" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start`,o.serviceWorker.url,location.host);throw new Error(O)}e.worker=x,e.registration=k,e.events.addListener(window,"beforeunload",()=>{x.state!=="redundant"&&e.workerChannel.send("CLIENT_CLOSED"),window.clearInterval(e.keepAliveInterval)});const S=await q(()=>Zt(e,x));return S.error&&R.devUtils.error(`Detected outdated Service Worker: ${S.error.message}

The mocking is still enabled, but it's highly recommended that you update your Service Worker by running:

$ npx msw init <PUBLIC_DIR>

This is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.
If this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues      `),e.keepAliveInterval=window.setInterval(()=>e.workerChannel.send("KEEPALIVE_REQUEST"),5e3),wr(k,e.startOptions),k})().then(async w=>{const x=w.installing||w.waiting;return x&&await new Promise(k=>{x.addEventListener("statechange",()=>{if(x.state==="activated")return k()})}),await F(e,o).catch(k=>{throw new Error(`Failed to enable mocking: ${k==null?void 0:k.message}`)}),w})},Pr=U(),Rr=U();function Ve(e={}){e.quiet||console.log(`%c${Rr.devUtils.formatMessage("Mocking disabled.")}`,"color:orangered;font-weight:bold;")}var xr=e=>function(){var o;if(!e.isMockingEnabled){Pr.devUtils.warn('Found a redundant "worker.stop()" call. Note that stopping the worker while mocking already stopped has no effect. Consider removing this "worker.stop()" call.');return}e.workerChannel.send("MOCK_DEACTIVATE"),e.isMockingEnabled=!1,window.clearInterval(e.keepAliveInterval),Ve({quiet:(o=e.startOptions)==null?void 0:o.quiet})};At();var Er={serviceWorker:{url:"/mockServiceWorker.js",options:null},quiet:!1,waitUntilReady:!0,onUnhandledRequest:"warn",findWorker(e,r){return e===r}};function qr(){const e=(r,o)=>{e.state="pending",e.resolve=p=>{if(e.state!=="pending")return;e.result=p;const m=_=>(e.state="fulfilled",_);return r(p instanceof Promise?p:Promise.resolve(p).then(m))},e.reject=p=>{if(e.state==="pending")return queueMicrotask(()=>{e.state="rejected"}),o(e.rejectionReason=p)}};return e}var Ke=(dt=class extends Promise{constructor(r=null){const o=qr();super((p,m)=>{o(p,m),r==null||r(o.resolve,o.reject)});ie(this,ee);ie(this,X,void 0);L(this,"resolve");L(this,"reject");we(this,X,o),this.resolve=N(this,X).resolve,this.reject=N(this,X).reject}get state(){return N(this,X).state}get rejectionReason(){return N(this,X).rejectionReason}then(r,o){return V(this,ee,fe).call(this,super.then(r,o))}catch(r){return V(this,ee,fe).call(this,super.catch(r))}finally(r){return V(this,ee,fe).call(this,super.finally(r))}},X=new WeakMap,ee=new WeakSet,fe=function(r){return Object.defineProperties(r,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})},dt);function Ye(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const r=Math.random()*16|0;return(e=="x"?r:r&3|8).toString(16)})}var kr=class{constructor(e){this.request=e,this.responsePromise=new Ke}respondWith(e){l(this.responsePromise.state==="pending",'Failed to respond to "%s %s" request: the "request" event has already been responded to.',this.request.method,this.request.url),this.responsePromise.resolve(e)}};function Qe(e){const r=new kr(e);return Reflect.set(e,"respondWith",r.respondWith.bind(r)),{interactiveRequest:e,requestController:r}}async function Ze(e,r,...o){const p=e.listeners(r);if(p.length!==0)for(const m of p)await m.apply(e,o)}function Sr(e,r){try{return e[r],!0}catch{return!1}}function Lr(e){try{return new URL(e),!0}catch{return!1}}var et=class extends ye{constructor(){super(et.symbol)}checkEnvironment(){return typeof globalThis<"u"&&typeof globalThis.fetch<"u"}setup(){const e=globalThis.fetch;l(!e[Q],'Failed to patch the "fetch" module: already patched.'),globalThis.fetch=async(r,o)=>{var p;const m=Ye(),_=typeof r=="string"&&typeof location<"u"&&!Lr(r)?new URL(r,location.origin):r,w=new Request(_,o);this.logger.info("[%s] %s",w.method,w.url);const{interactiveRequest:x,requestController:k}=Qe(w);this.logger.info('emitting the "request" event for %d listener(s)...',this.emitter.listenerCount("request")),this.emitter.once("request",({requestId:H})=>{H===m&&k.responsePromise.state==="pending"&&k.responsePromise.resolve(void 0)}),this.logger.info("awaiting for the mocked response...");const S=x.signal,O=new Ke;S.addEventListener("abort",()=>{O.reject(S.reason)},{once:!0});const C=await q(async()=>{const H=Ze(this.emitter,"request",{request:x,requestId:m});await Promise.race([O,H,k.responsePromise]),this.logger.info("all request listeners have been resolved!");const A=await k.responsePromise;return this.logger.info("event.respondWith called with:",A),A});if(O.state==="rejected")return Promise.reject(O.rejectionReason);if(C.error)return Promise.reject(rt(C.error));const j=C.data;if(j&&!((p=w.signal)!=null&&p.aborted)){if(this.logger.info("received mocked response:",j),Sr(j,"type")&&j.type==="error")return this.logger.info("received a network error response, rejecting the request promise..."),Promise.reject(rt(j));const H=j.clone();this.emitter.emit("response",{response:H,isMockedResponse:!0,request:x,requestId:m});const A=new Response(j.body,j);return Object.defineProperty(A,"url",{writable:!1,enumerable:!0,configurable:!1,value:w.url}),A}return this.logger.info("no mocked response received!"),e(w).then(H=>{const A=H.clone();return this.logger.info("original fetch performed",A),this.emitter.emit("response",{response:A,isMockedResponse:!1,request:x,requestId:m}),H})},Object.defineProperty(globalThis.fetch,Q,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis.fetch,Q,{value:void 0}),globalThis.fetch=e,this.logger.info('restored native "globalThis.fetch"!',globalThis.fetch.name)})}},tt=et;tt.symbol=Symbol("fetch");function rt(e){return Object.assign(new TypeError("Failed to fetch"),{cause:e})}function Tr(e,r){const o=new Uint8Array(e.byteLength+r.byteLength);return o.set(e,0),o.set(r,e.byteLength),o}var st=class{constructor(e,r){this.AT_TARGET=0,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=0,this.NONE=0,this.type="",this.srcElement=null,this.currentTarget=null,this.eventPhase=0,this.isTrusted=!0,this.composed=!1,this.cancelable=!0,this.defaultPrevented=!1,this.bubbles=!0,this.lengthComputable=!0,this.loaded=0,this.total=0,this.cancelBubble=!1,this.returnValue=!0,this.type=e,this.target=(r==null?void 0:r.target)||null,this.currentTarget=(r==null?void 0:r.currentTarget)||null,this.timeStamp=Date.now()}composedPath(){return[]}initEvent(e,r,o){this.type=e,this.bubbles=!!r,this.cancelable=!!o}preventDefault(){this.defaultPrevented=!0}stopPropagation(){}stopImmediatePropagation(){}},Or=class extends st{constructor(e,r){super(e),this.lengthComputable=(r==null?void 0:r.lengthComputable)||!1,this.composed=(r==null?void 0:r.composed)||!1,this.loaded=(r==null?void 0:r.loaded)||0,this.total=(r==null?void 0:r.total)||0}},jr=typeof ProgressEvent<"u";function Mr(e,r,o){const p=["error","progress","loadstart","loadend","load","timeout","abort"],m=jr?ProgressEvent:Or;return p.includes(r)?new m(r,{lengthComputable:!0,loaded:(o==null?void 0:o.loaded)||0,total:(o==null?void 0:o.total)||0}):new st(r,{target:e,currentTarget:e})}function nt(e,r){if(!(r in e))return null;if(Object.prototype.hasOwnProperty.call(e,r))return e;const p=Reflect.getPrototypeOf(e);return p?nt(p,r):null}function ot(e,r){return new Proxy(e,Ar(r))}function Ar(e){const{constructorCall:r,methodCall:o,getProperty:p,setProperty:m}=e,_={};return typeof r<"u"&&(_.construct=function(w,x,k){const S=Reflect.construct.bind(null,w,x,k);return r.call(k,x,S)}),_.set=function(w,x,k){const S=()=>{const O=nt(w,x)||w,C=Reflect.getOwnPropertyDescriptor(O,x);return typeof(C==null?void 0:C.set)<"u"?(C.set.apply(w,[k]),!0):Reflect.defineProperty(O,x,{writable:!0,enumerable:!0,configurable:!0,value:k})};return typeof m<"u"?m.call(w,[x,k],S):S()},_.get=function(w,x,k){const S=()=>w[x],O=typeof p<"u"?p.call(w,[x,k],S):S();return typeof O=="function"?(...C)=>{const j=O.bind(w,...C);return typeof o<"u"?o.call(w,[x,C],j):j()}:O},_}function Cr(e){return["application/xhtml+xml","application/xml","image/svg+xml","text/html","text/xml"].some(o=>e.startsWith(o))}function Hr(e){try{return JSON.parse(e)}catch{return null}}function Ir(e,r){const o=Ne(e.status)?null:r;return new Response(o,{status:e.status,statusText:e.statusText,headers:Dr(e.getAllResponseHeaders())})}function Dr(e){const r=new Headers,o=e.split(/[\r\n]+/);for(const p of o){if(p.trim()==="")continue;const[m,..._]=p.split(": "),w=_.join(": ");r.append(m,w)}return r}var it=Symbol("isMockedResponse"),Ur=b(),Wr=class{constructor(e,r){this.initialRequest=e,this.logger=r,this.method="GET",this.url=null,this.events=new Map,this.requestId=Ye(),this.requestHeaders=new Headers,this.responseBuffer=new Uint8Array,this.request=ot(e,{setProperty:([o,p],m)=>{switch(o){case"ontimeout":{const _=o.slice(2);return this.request.addEventListener(_,p),m()}default:return m()}},methodCall:([o,p],m)=>{var _;switch(o){case"open":{const[w,x]=p;return typeof x>"u"?(this.method="GET",this.url=at(w)):(this.method=w,this.url=at(x)),this.logger=this.logger.extend(`${this.method} ${this.url.href}`),this.logger.info("open",this.method,this.url.href),m()}case"addEventListener":{const[w,x]=p;return this.registerEvent(w,x),this.logger.info("addEventListener",w,x),m()}case"setRequestHeader":{const[w,x]=p;return this.requestHeaders.set(w,x),this.logger.info("setRequestHeader",w,x),m()}case"send":{const[w]=p;w!=null&&(this.requestBody=typeof w=="string"?tr(w):w),this.request.addEventListener("load",()=>{if(typeof this.onResponse<"u"){const S=Ir(this.request,this.request.response);this.onResponse.call(this,{response:S,isMockedResponse:it in this.request,request:x,requestId:this.requestId})}});const x=this.toFetchApiRequest();(((_=this.onRequest)==null?void 0:_.call(this,{request:x,requestId:this.requestId}))||Promise.resolve()).finally(()=>{if(this.request.readyState<this.request.LOADING)return this.logger.info("request callback settled but request has not been handled (readystate %d), performing as-is...",this.request.readyState),Ur&&this.request.setRequestHeader("X-Request-Id",this.requestId),m()});break}default:return m()}}})}registerEvent(e,r){const p=(this.events.get(e)||[]).concat(r);this.events.set(e,p),this.logger.info('registered event "%s"',e,r)}respondWith(e){this.logger.info("responding with a mocked response: %d %s",e.status,e.statusText),Z(this.request,it,!0),Z(this.request,"status",e.status),Z(this.request,"statusText",e.statusText),Z(this.request,"responseURL",this.url.href),this.request.getResponseHeader=new Proxy(this.request.getResponseHeader,{apply:(p,m,_)=>{if(this.logger.info("getResponseHeader",_[0]),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning null"),null;const w=e.headers.get(_[0]);return this.logger.info('resolved response header "%s" to',_[0],w),w}}),this.request.getAllResponseHeaders=new Proxy(this.request.getAllResponseHeaders,{apply:()=>{if(this.logger.info("getAllResponseHeaders"),this.request.readyState<this.request.HEADERS_RECEIVED)return this.logger.info("headers not received yet, returning empty string"),"";const m=Array.from(e.headers.entries()).map(([_,w])=>`${_}: ${w}`).join(`\r
`);return this.logger.info("resolved all response headers to",m),m}}),Object.defineProperties(this.request,{response:{enumerable:!0,configurable:!1,get:()=>this.response},responseText:{enumerable:!0,configurable:!1,get:()=>this.responseText},responseXML:{enumerable:!0,configurable:!1,get:()=>this.responseXML}});const r=e.headers.has("Content-Length")?Number(e.headers.get("Content-Length")):void 0;this.logger.info("calculated response body length",r),this.trigger("loadstart",{loaded:0,total:r}),this.setReadyState(this.request.HEADERS_RECEIVED),this.setReadyState(this.request.LOADING);const o=()=>{this.logger.info("finalizing the mocked response..."),this.setReadyState(this.request.DONE),this.trigger("load",{loaded:this.responseBuffer.byteLength,total:r}),this.trigger("loadend",{loaded:this.responseBuffer.byteLength,total:r})};if(e.body){this.logger.info("mocked response has body, streaming...");const p=e.body.getReader(),m=async()=>{const{value:_,done:w}=await p.read();if(w){this.logger.info("response body stream done!"),o();return}_&&(this.logger.info("read response body chunk:",_),this.responseBuffer=Tr(this.responseBuffer,_),this.trigger("progress",{loaded:this.responseBuffer.byteLength,total:r})),m()};m()}else o()}responseBufferToText(){return rr(this.responseBuffer)}get response(){if(this.logger.info("getResponse (responseType: %s)",this.request.responseType),this.request.readyState!==this.request.DONE)return null;switch(this.request.responseType){case"json":{const e=Hr(this.responseBufferToText());return this.logger.info("resolved response JSON",e),e}case"arraybuffer":{const e=sr(this.responseBuffer);return this.logger.info("resolved response ArrayBuffer",e),e}case"blob":{const e=this.request.getResponseHeader("Content-Type")||"text/plain",r=new Blob([this.responseBufferToText()],{type:e});return this.logger.info("resolved response Blob (mime type: %s)",r,e),r}default:{const e=this.responseBufferToText();return this.logger.info('resolving "%s" response type as text',this.request.responseType,e),e}}}get responseText(){if(l(this.request.responseType===""||this.request.responseType==="text","InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.LOADING&&this.request.readyState!==this.request.DONE)return"";const e=this.responseBufferToText();return this.logger.info('getResponseText: "%s"',e),e}get responseXML(){if(l(this.request.responseType===""||this.request.responseType==="document","InvalidStateError: The object is in invalid state."),this.request.readyState!==this.request.DONE)return null;const e=this.request.getResponseHeader("Content-Type")||"";return typeof DOMParser>"u"?(console.warn("Cannot retrieve XMLHttpRequest response body as XML: DOMParser is not defined. You are likely using an environment that is not browser or does not polyfill browser globals correctly."),null):Cr(e)?new DOMParser().parseFromString(this.responseBufferToText(),e):null}errorWith(e){this.logger.info("responding with an error"),this.setReadyState(this.request.DONE),this.trigger("error"),this.trigger("loadend")}setReadyState(e){if(this.logger.info("setReadyState: %d -> %d",this.request.readyState,e),this.request.readyState===e){this.logger.info("ready state identical, skipping transition...");return}Z(this.request,"readyState",e),this.logger.info("set readyState to: %d",e),e!==this.request.UNSENT&&(this.logger.info('triggerring "readystatechange" event...'),this.trigger("readystatechange"))}trigger(e,r){const o=this.request[`on${e}`],p=Mr(this.request,e,r);this.logger.info('trigger "%s"',e,r||""),typeof o=="function"&&(this.logger.info('found a direct "%s" callback, calling...',e),o.call(this.request,p));for(const[m,_]of this.events)m===e&&(this.logger.info('found %d listener(s) for "%s" event, calling...',_.length,e),_.forEach(w=>w.call(this.request,p)))}toFetchApiRequest(){this.logger.info("converting request to a Fetch API Request...");const e=new Request(this.url.href,{method:this.method,headers:this.requestHeaders,credentials:this.request.withCredentials?"include":"same-origin",body:["GET","HEAD"].includes(this.method)?null:this.requestBody}),r=ot(e.headers,{methodCall:([o,p],m)=>{switch(o){case"append":case"set":{const[_,w]=p;this.request.setRequestHeader(_,w);break}case"delete":{const[_]=p;console.warn(`XMLHttpRequest: Cannot remove a "${_}" header from the Fetch API representation of the "${e.method} ${e.url}" request. XMLHttpRequest headers cannot be removed.`);break}}return m()}});return Z(e,"headers",r),this.logger.info("converted request to a Fetch API Request!",e),e}};function at(e){return typeof location>"u"?new URL(e):new URL(e.toString(),location.href)}function Z(e,r,o){Reflect.defineProperty(e,r,{writable:!0,enumerable:!0,value:o})}function Br({emitter:e,logger:r}){return new Proxy(globalThis.XMLHttpRequest,{construct(p,m,_){r.info("constructed new XMLHttpRequest");const w=Reflect.construct(p,m,_),x=Object.getOwnPropertyDescriptors(p.prototype);for(const S in x)Reflect.defineProperty(w,S,x[S]);const k=new Wr(w,r);return k.onRequest=async function({request:S,requestId:O}){const{interactiveRequest:C,requestController:j}=Qe(S);this.logger.info("awaiting mocked response..."),e.once("request",({requestId:B})=>{B===O&&j.responsePromise.state==="pending"&&j.respondWith(void 0)});const H=await q(async()=>{this.logger.info('emitting the "request" event for %s listener(s)...',e.listenerCount("request")),await Ze(e,"request",{request:C,requestId:O}),this.logger.info('all "request" listeners settled!');const B=await j.responsePromise;return this.logger.info("event.respondWith called with:",B),B});if(H.error){this.logger.info("request listener threw an exception, aborting request...",H.error),k.errorWith(H.error);return}const A=H.data;if(typeof A<"u"){if(this.logger.info("received mocked response: %d %s",A.status,A.statusText),A.type==="error"){this.logger.info("received a network error response, rejecting the request promise..."),k.errorWith(new TypeError("Network error"));return}return k.respondWith(A)}this.logger.info("no mocked response received, performing request as-is...")},k.onResponse=async function({response:S,isMockedResponse:O,request:C,requestId:j}){this.logger.info('emitting the "response" event for %s listener(s)...',e.listenerCount("response")),e.emit("response",{response:S,isMockedResponse:O,request:C,requestId:j})},k.request}})}var ut=class extends ye{constructor(){super(ut.interceptorSymbol)}checkEnvironment(){return typeof globalThis.XMLHttpRequest<"u"}setup(){const e=this.logger.extend("setup");e.info('patching "XMLHttpRequest" module...');const r=globalThis.XMLHttpRequest;l(!r[Q],'Failed to patch the "XMLHttpRequest" module: already patched.'),globalThis.XMLHttpRequest=Br({emitter:this.emitter,logger:this.logger}),e.info('native "XMLHttpRequest" module patched!',globalThis.XMLHttpRequest.name),Object.defineProperty(globalThis.XMLHttpRequest,Q,{enumerable:!0,configurable:!0,value:!0}),this.subscriptions.push(()=>{Object.defineProperty(globalThis.XMLHttpRequest,Q,{value:void 0}),globalThis.XMLHttpRequest=r,e.info('native "XMLHttpRequest" module restored!',globalThis.XMLHttpRequest.name)})}},lt=ut;lt.interceptorSymbol=Symbol("xhr");var Nr=Tt();function $r(e,r){const o=new me({name:"fallback",interceptors:[new tt,new lt]});return o.on("request",async({request:p,requestId:m})=>{const _=p.clone(),w=await(0,Nr.handleRequest)(p,m,e.requestHandlers,r,e.emitter,{onMockedResponse(x,{handler:k,parsedResult:S}){r.quiet||e.emitter.once("response:mocked",({response:O})=>{k.log({request:_,response:O,parsedResult:S})})}});w&&p.respondWith(w)}),o.on("response",({response:p,isMockedResponse:m,request:_,requestId:w})=>{e.emitter.emit(m?"response:mocked":"response:bypass",{response:p,request:_,requestId:w})}),o.apply(),o}function Fr(e){return async function(o){e.fallbackInterceptor=$r(e,o),$({message:"Mocking enabled (fallback mode).",quiet:o.quiet})}}function Xr(e){return function(){var o,p;(o=e.fallbackInterceptor)==null||o.dispose(),Ve({quiet:(p=e.startOptions)==null?void 0:p.quiet})}}var ct=U(),Gr=tn(),Jr=At();function zr(){try{const e=new ReadableStream({start:o=>o.close()});return new MessageChannel().port1.postMessage(e,[e]),!0}catch{return!1}}var pt=class extends Gr.SetupApi{constructor(...r){super(...r);L(this,"context");L(this,"startHandler",null);L(this,"stopHandler",null);L(this,"listeners");l(!b(),ct.devUtils.formatMessage("Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.")),this.listeners=[],this.context=this.createWorkerContext()}createWorkerContext(){const r={isMockingEnabled:!1,startOptions:null,worker:null,registration:null,requestHandlers:this.currentHandlers,requests:new Map,emitter:this.emitter,workerChannel:{on:(o,p)=>{this.context.events.addListener(navigator.serviceWorker,"message",m=>{if(m.source!==this.context.worker)return;const _=m.data;_&&_.type===o&&p(m,_)})},send:o=>{var p;(p=this.context.worker)==null||p.postMessage(o)}},events:{addListener:(o,p,m)=>(o.addEventListener(p,m),this.listeners.push({eventType:p,target:o,callback:m}),()=>{o.removeEventListener(p,m)}),removeAllListeners:()=>{for(const{target:o,eventType:p,callback:m}of this.listeners)o.removeEventListener(p,m);this.listeners=[]},once:o=>{const p=[];return new Promise((m,_)=>{const w=x=>{try{const k=x.data;k.type===o&&m(k)}catch(k){_(k)}};p.push(this.context.events.addListener(navigator.serviceWorker,"message",w),this.context.events.addListener(navigator.serviceWorker,"messageerror",_))}).finally(()=>{p.forEach(m=>m())})}},supports:{serviceWorkerApi:!("serviceWorker"in navigator)||location.protocol==="file:",readableStreamTransfer:zr()}};return Object.defineProperties(r,{requestHandlers:{get:()=>this.currentHandlers}}),this.startHandler=r.supports.serviceWorkerApi?Fr(r):_r(r),this.stopHandler=r.supports.serviceWorkerApi?Xr(r):xr(r),r}async start(r={}){return r.waitUntilReady===!0&&ct.devUtils.warn('The "waitUntilReady" option has been deprecated. Please remove it from this "worker.start()" call. Follow the recommended Browser integration (https://mswjs.io/docs/integrations/browser) to eliminate any race conditions between the Service Worker registration and any requests made by your application on initial render.'),this.context.startOptions=(0,Jr.mergeRight)(Er,r),await this.startHandler(this.context.startOptions,r)}stop(){super.dispose(),this.context.events.removeAllListeners(),this.context.emitter.removeAllListeners(),this.stopHandler()}};function Vr(...e){return new pt(...e)}return De}var sn=J&&J.__awaiter||function(t,s,n,c){function d(i){return i instanceof n?i:new n(function(g){g(i)})}return new(n||(n=Promise))(function(i,g){function y(u){try{a(c.next(u))}catch(f){g(f)}}function P(u){try{a(c.throw(u))}catch(f){g(f)}}function a(u){u.done?i(u.value):d(u.value).then(y,P)}a((c=c.apply(t,s||[])).next())})},nn=J&&J.__generator||function(t,s){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,d,i,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(a){return function(u){return P([a,u])}}function P(a){if(c)throw new TypeError("Generator is already executing.");for(;g&&(g=0,a[0]&&(n=0)),n;)try{if(c=1,d&&(i=a[0]&2?d.return:a[0]?d.throw||((i=d.return)&&i.call(d),0):d.next)&&!(i=i.call(d,a[1])).done)return i;switch(d=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,d=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=s.call(t,n)}catch(u){a=[6,u],d=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(I,"__esModule",{value:!0});I.mswLoader=I.mswDecorator=I.getWorker=I.initializeWorker=I.initialize=void 0;var on=Bt,an=!(0,on.isNodeProcess)(),un=typeof navigator<"u"&&navigator.product==="ReactNative",M,ae;function Jt(t,s){var n;if(s===void 0&&(s=[]),un){var c=Us.setupServer,d=c.apply(void 0,s);ae=d.listen(t),M=d}else if(an){var i=rn().setupWorker,g=i.apply(void 0,s);ae=g.start(t),M=g}else{var y=typeof process<"u"&&((n=process.versions)===null||n===void 0?void 0:n.node),P=y?typeof __webpack_require__=="function"?__non_webpack_require__:Qr:void 0,c=P("msw/node").setupServer,d=c.apply(void 0,s);ae=d.listen(t),M=d}return M}I.initialize=Jt;function ln(t){return console.warn('[MSW] "initializeWorker" is now deprecated, please use "initialize" instead. This method will be removed in future releases.'),Jt(t)}I.initializeWorker=ln;function cn(){if(M===void 0)throw new Error('[MSW] Failed to retrieve the worker: no active worker found. Did you forget to call "initialize"?');return M}I.getWorker=cn;var pn=function(t,s){var n=s.parameters.msw;if(M&&(M.resetHandlers(),n)){if(Array.isArray(n)&&n.length>0)M.use.apply(M,n);else if("handlers"in n&&n.handlers){var c=Object.values(n.handlers).filter(Boolean).reduce(function(d,i){return d.concat(i)},[]);c.length>0&&M.use.apply(M,c)}}return t()};I.mswDecorator=pn;var dn=function(t){return sn(void 0,void 0,void 0,function(){var s,n;return nn(this,function(c){switch(c.label){case 0:return s=t.parameters.msw,M&&(M.resetHandlers(),s&&(Array.isArray(s)&&s.length>0?M.use.apply(M,s):"handlers"in s&&s.handlers&&(n=Object.values(s.handlers).filter(Boolean).reduce(function(d,i){return d.concat(i)},[]),n.length>0&&M.use.apply(M,n)))),ae?[4,ae]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2,{}]}})})};I.mswLoader=dn;(function(t){var s=J&&J.__createBinding||(Object.create?function(c,d,i,g){g===void 0&&(g=i);var y=Object.getOwnPropertyDescriptor(d,i);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[i]}}),Object.defineProperty(c,g,y)}:function(c,d,i,g){g===void 0&&(g=i),c[g]=d[i]}),n=J&&J.__exportStar||function(c,d){for(var i in c)i!=="default"&&!Object.prototype.hasOwnProperty.call(d,i)&&s(d,c,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(I,t)})(We);We.initialize({onUnhandledRequest:"bypass"});const yn={parameters:{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/i}}},loaders:[We.mswLoader]};export{yn as default};
